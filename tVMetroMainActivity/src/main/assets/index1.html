<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title></title>
	<style type="text/css">
		* {
		margin: 0;
		padding: 0;
		}

		.clear {
		clear: both;
		}

		.main-page {
		position: relative;
		width: 1440px;
		top: 15px;
		}

		.main-page .left,
		.main-page .right {
		float: left;
		}

		.main-page .nav-back {
		width: 220px;
		height: 300px;
		opacity: .3;
		filter: alpha(opacity=30);
		}

		.main-page .nav {
		position: relative;
		margin-top: -240px;
		width: 190px;
		text-align: center;
		font-size: 14px;
		font-family: "微软雅黑";
		color: #fff;
		margin-left: 40px;
		}

		.main-page .nav div {
		height: 40px;
		line-height: 40px;
		margin-bottom: 15px;
		font-size: 22px;
		color: #E70127;
		}

		.main-page .nav div.on {
		background: #e70127;
		box-shadow: 0px 2px 4px rgba(0, 0, 0, .5);
		/*border-radius: 10px;*/
		transform: scale(1.1);
		-webkit-transform: scale(1.1);
		border: none;
		border-radius: 40px;
		color: #FFFFFF;
		}

		.main-page .right {
		width: 1170px;
		height: 520px;
		margin-left: 20px;
		margin-top: 50px;
		}

		.main-page .content-back {
		width: 1170px;
		height: 520px;
		}

		.main-page .content {
		position: relative;
		width: 1120px;
		height: 500px;
		margin-top: -520px;
		padding: 10px;
		overflow: hidden;
		}

		.main-page .content div {
		width: 1150px;
		height: 500px;
		margin-bottom: 10px;
		overflow-x: hidden;
		}

		.main-page .content div dl {
		margin: 25px 0 0 25px;
		width: 120px;
		height: 30px;
		background: white;
		float: left;
		box-shadow: 0px 1px 5px rgba(0, 0, 0, .5);
		border-radius: 40px;
		text-align: center;
		line-height: 30px;
		background: #fe7045;
		color: #FFFFFF;

		}

		.focus {
		box-shadow: 0px 4px 20px rgba(0, 0, 0, 1);
		/*border-radius: 10px;*/
		transform: scale(1.3);
		-webkit-transform: scale(1.3);
		border: none;
		/*border: 1px solid #ccc;*/
		}

	</style>
</head>

<body style="background-image:url(66.jpg);background-size: 100%;background-repeat:no-repeat;" toppicurl="" selectpicurl="">
<div style="height: 200px;"></div>
<div class="main-page">
	<div style="width: 100%"></div>
	<div class="left">
		<div class="nav-back">
		</div>
		<div class="nav">
			<div class="on" sortid="1614">
				鲁山县</div>
			<div sortid="1615">
				郏县</div>
			<div>
				叶县</div>
			<div>
				宝丰县</div>
			<div>
				新华区</div>
			<div>
				湛河区</div>
			<div>
				石龙区</div>
			<div>
				新城区</div>

		</div>
	</div>
	<div class="right">
		<div class="content-back">
		</div>
		<div class="content">

			<div style="overflow:hidden;width: 1130px; ">
				<div sortid="1614" style="overflow-y: scroll;overflow-x: hidden;">

					<dl goodsid="130">鲁山县</dl><dl goodsid="130">鲁山县</dl><dl goodsid="130">鲁山县</dl><dl goodsid="130">鲁山县</dl>

				</div>
			</div>

			<div style="overflow:hidden;width: 1130px; ">
				<div sortid="1615" style="overflow-y: scroll;overflow-x: hidden;">
					<dl goodsid="130">
						鲁山县

					</dl>
					<dl goodsid="130">
						鲁山县

					</dl>
					<dl goodsid="130">
						鲁山县

					</dl>
				</div>
			</div>

		</div>
	</div>
	<div class="clear">
	</div>
</div>
</body>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="echo.js"></script>
<script type="text/javascript">
		$(".main-page .nav div").mouseenter(function() {
			var $this = $(this);
			var index = $this.index();
		}).mouseleave(function() {
			var $this = $(this);
			var index = $this.index();
		}).click(function() {
			var $this = $(this);
			var index = $this.index();
			var l = -(index * 520);
			$(".main-page .nav div").removeClass("on");
			$(".main-page .nav div").removeAttr("style");
			$($this).addClass("on");
			var selectPicUrl = $this.parents("body").attr("selectpicurl")
			if(selectPicUrl) {
				$this.css({
					"background": "url(" + selectPicUrl + ")no-repeat",
					"background-size": "100% 100%"
				})
			}
			$(".main-page .content div:eq(0)").stop().animate({
				"margin-top": l
			}, 200);
			var sortid = $this.attr("sortid");
			if($(".content div[sortid='" + sortid + "']:has(dl)").length == 0) {
				$.post("selectGoodsBySortId?sortId=" + sortid, function(data) {
					$(".content div[sortid='" + sortid + "']").html(data)
				})
			}
			Echo.init({
				offset: 150,
				throttle: 0
			});
		});
	</script>
<script>
		$(function() {
			$(".nav div:first").click()
			Echo.init({
				offset: 150,
				throttle: 0
			});
		})
		$(document).keydown(function(event) {
			event.preventDefault();
			var sortId = ($(".on").attr("sortid"))
			var $contentDiv = $(".content div[sortid='" + sortId + "']")
			if(event.keyCode == 37) {
				if($contentDiv.find(".focus").length != 0) {
					var index = $contentDiv.find(".focus").index();
					if(index % 4 == 0) {
						$($contentDiv).find("dl").removeClass("focus")
						$(".on").removeAttr("style")
						var selectPicUrl = $(".on").parents("body").attr("selectpicurl")
						if(selectPicUrl) {
							$(".on").css({
								"background": "url(" + selectPicUrl + ")no-repeat",
								"background-size": "100% 100%"
							})
						}
						$(".on").attr("goodsindex", index)
					} else {
						$contentDiv.find("dl").removeClass("focus")
						$contentDiv.find("dl").eq(index - 1).addClass("focus");
					}
				}
			}

			if(event.keyCode == 38) {
				if($contentDiv.find(".focus").length == 0) {
					var n = $(".on").index() - $(".on").parent().find("div:first").index()
					if(n != 0)
						$(".on").removeAttr("style")
					$(".on").prev().css(("background", "rgba(0, 148, 234, 0.4)"))
					if(($(".nav div:last").index() - $(".on").index() > 2) && $(".on").index() > 3) {
						$(".nav").animate({
							'scrollTop': "-=65px"
						}, 50)
					}
					if(n != 0)
						$(".on").prev().click()
				} else {
					var index = $contentDiv.find(".focus").index()
					if(index >= 4) {
						$contentDiv.find("dl").removeClass("focus")
						if(index >= 4 && index < 8) {
							$contentDiv.animate({
								'scrollTop': "-=330px"
							}, 200)
						} else {
							$contentDiv.animate({
								'scrollTop': "-=325px"
							}, 200)
						}
						$contentDiv.find("dl").eq(index - 4).addClass("focus")
					}
				}
			}
			if(event.keyCode == 39) {
				if($contentDiv.has("dl").length != 0) {
					if($contentDiv.find(".focus").length == 0) {
						var goodsindex = $(".on").attr("goodsindex");
						if(goodsindex) {
							$contentDiv.find("dl").eq(goodsindex).addClass("focus")
							if($contentDiv.find("dl:last").index() - goodsindex < 4)
								$contentDiv.animate({
									'scrollTop': "+=10px"
								}, 200)
						} else
							$contentDiv.find("dl").eq(0).addClass("focus")
						$(".on").css("background", "rgba(0, 148, 234, 0.4)")
					} else {
						var index = $contentDiv.find(".focus").index()
						if(index != $contentDiv.find("dl:last").index()) {
							$contentDiv.find("dl").removeClass("focus")
							if(index % 4 == 3) {
								if(index < 4) {
									$contentDiv.animate({
										'scrollTop': "+=330px"
									}, 200)
								} else {
									$contentDiv.animate({
										'scrollTop': "+=325px"
									}, 200)
								}
								Echo.init({
									offset: 150,
									throttle: 0
								});
							}
							$contentDiv.find("dl").eq(index + 1).addClass("focus")
						}
					}
				}
			}
			if(event.keyCode == 40) {
				if($contentDiv.find(".focus").length == 0) {
					var n = $(".on").index() - $(".on").parent().find("div:last").index()
					if(n != 0)
						$(".on").removeAttr("style")
					$(".on").next().css(("background", "rgba(0, 148, 234, 0.4)"))

					if($(".on").index() > 2 && ($(".nav div:last").index() - $(".on").index() > 3)) {
						$(".nav").animate({
							'scrollTop': "+=66px"
						}, 50)
					}
					if(n != 0) {
						$(".on").next().click()
					}
				} else {
					var index = $contentDiv.find(".focus").index()
					if($contentDiv.find("dl:last").index() >= (index + 4)) {
						$contentDiv.find("dl").removeClass("focus")
						if(index < 4) {
							$contentDiv.animate({
								'scrollTop': "+=330px"
							}, 200)
						} else {
							$contentDiv.animate({
								'scrollTop': "+=325px"
							}, 200)
						}
						$contentDiv.find("dl").eq(index + 4).addClass("focus")
						Echo.init({
							offset: 150,
							throttle: 0
						});
					}
					if($contentDiv.find("dl:last").index() - index < 4 && (Math.floor($contentDiv.find("dl:last").index() / 4)) != Math.floor(index / 4)) {
						$contentDiv.find("dl").removeClass("focus")
						$contentDiv.find("dl:last").addClass("focus")
						$contentDiv.animate({
							'scrollTop': "+=325px"
						}, 200)

					}
				}
			}
			if(event.keyCode == 13) {
				if($contentDiv.find(".focus").length != 0) {
				    var goodsName = $contentDiv.find(".focus").html();
				    var commodityName = ""; //名称
				    commodityName = goodsName;
				     alert(commodityName);
				    test.showToast(commodityName);
					var goodsId = $contentDiv.find(".focus").attr("goodsid")
					var data = eval("(" + selectGoodsDetails(goodsId) + ")")




				}
			}
		})
		//商品详情
		function selectGoodsDetails(goodsId) {
			var goodsDetails = "";
			$.ajax({
				url: "selectGoodsDetails?goodsId=" + goodsId,
				type: 'post',
				async: false,
				success: function(data) {
					goodsDetails = data
				}
			})
			return goodsDetails;
		}
	</script>

</html>